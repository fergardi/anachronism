<mat-sidenav-container class="app-sidenav-container" autosize>
  <mat-sidenav class="app-sidenav" #left mode="side" opened="true">
    <mat-toolbar>
      <button mat-icon-button (click)="left.toggle()">
        <mat-icon class="primary-color">menu</mat-icon>
      </button>
      <h3 class="primary-color">FILTERS</h3>
      <span class="flex-separator"></span>
      <button mat-icon-button (click)="resetFilters()">
        <mat-icon class="primary-color">clear</mat-icon>
      </button>
    </mat-toolbar>
    <form [formGroup]="filters" class="sidenav-filters">
      <div class="filter-container">
        <label><b>Card Name</b></label>
        <mat-form-field appareance="outline">
          <input matInput placeholder="Name of the Card" formControlName="name"/>
        </mat-form-field>
      </div>
      <div class="filter-container">
        <label><b>Skill:</b>&nbsp;Text</label>
        <mat-form-field appareance="outline">
          <textarea matInput placeholder="Skill and/or Text" formControlName="text"></textarea>
        </mat-form-field>
      </div>
      <div class="filter-container">
        <label><b>Culture</b>&nbsp;&nbsp;<span class="middot">·</span>&nbsp;&nbsp;<span class="disabled-color">Type</span>&nbsp;&nbsp;<span class="middot">·</span>&nbsp;&nbsp;<span class="disabled-color">Subtype</span></label>
        <mat-chip-listbox multiple formControlName="cultures">
          <mat-chip-option *ngFor="let c of cultures">{{ c }}</mat-chip-option>
        </mat-chip-listbox>
      </div>
      <div class="filter-container">
        <label><span class="disabled-color">Culture</span>&nbsp;&nbsp;<span class="middot">·</span>&nbsp;&nbsp;<b>Type</b>&nbsp;&nbsp;<span class="middot">·</span>&nbsp;&nbsp;<span class="disabled-color">Subtype</span></label>
        <mat-chip-listbox multiple formControlName="types">
          <mat-chip-option *ngFor="let t of types">{{ t }}</mat-chip-option>
        </mat-chip-listbox>
      </div>
      <div class="filter-container">
        <label><span class="disabled-color">Culture</span>&nbsp;&nbsp;<span class="middot">·</span>&nbsp;&nbsp;<span class="disabled-color">Type</span>&nbsp;&nbsp;<span class="middot">·</span>&nbsp;&nbsp;<b>Subtype</b></label>
        <mat-chip-listbox multiple formControlName="subtypes">
          <mat-chip-option *ngFor="let s of subtypes">{{ s }}</mat-chip-option>
        </mat-chip-listbox>
      </div>
      <div class="filter-container">
        <label><b>Attack Grid</b></label>
        <div fxLayout="row" fxLayoutAlign="center center">
          <div fxFlex="33">
            <mat-form-field appareance="outline">
              <input matInput placeholder="+0" formControlName="grid_1_1"/>
            </mat-form-field>
          </div>
          <div fxFlex="33">
            <mat-form-field appareance="outline">
              <input matInput placeholder="+0" formControlName="grid_1_2"/>
            </mat-form-field>
          </div>
          <div fxFlex="33">
            <mat-form-field appareance="outline">
              <input matInput placeholder="+0" formControlName="grid_1_3"/>
            </mat-form-field>
          </div>
        </div>
        <div fxLayout="row" fxLayoutAlign="center center">
          <div fxFlex="33">
            <mat-form-field appareance="outline">
              <input matInput placeholder="+0" formControlName="grid_2_1"/>
            </mat-form-field>
          </div>
          <div fxFlex="33">
            <mat-form-field appareance="outline">
              <input matInput placeholder="+0" formControlName="grid_2_2"/>
            </mat-form-field>
          </div>
          <div fxFlex="33">
            <mat-form-field appareance="outline">
              <input matInput placeholder="+0" formControlName="grid_2_3"/>
            </mat-form-field>
          </div>
        </div>
        <div fxLayout="row" fxLayoutAlign="center center">
          <div fxFlex="33">
            <mat-form-field appareance="outline">
              <input matInput placeholder="+0" formControlName="grid_3_1"/>
            </mat-form-field>
          </div>
          <div fxFlex="33">
            <mat-form-field appareance="outline">
              <input matInput placeholder="X" formControlName="grid_3_2"/>
            </mat-form-field>
          </div>
          <div fxFlex="33">
            <mat-form-field appareance="outline">
              <input matInput placeholder="+0" formControlName="grid_3_3"/>
            </mat-form-field>
          </div>
        </div>
        <div fxLayout="row" fxLayoutAlign="center center">
          <div fxFlex="33">
            <mat-form-field appareance="outline">
              <input matInput placeholder="+0" formControlName="grid_4_1"/>
            </mat-form-field>
          </div>
          <div fxFlex="33">
            <mat-form-field appareance="outline">
              <input matInput placeholder="+0" formControlName="grid_4_2"/>
            </mat-form-field>
          </div>
          <div fxFlex="33">
            <mat-form-field appareance="outline">
              <input matInput placeholder="+0" formControlName="grid_4_3"/>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="filter-container">
        <label><b>Element</b></label>
        <mat-chip-listbox multiple formControlName="elements">
          <mat-chip-option *ngFor="let e of elements">{{ e }}</mat-chip-option>
        </mat-chip-listbox>
      </div>
      <div class="filter-container">
        <label><b>Initiative</b></label>
        <mat-slider min="0" max="10" discrete>
          <input value="0" matSliderStartThumb formControlName="initiativeMin">
          <input value="10" matSliderEndThumb formControlName="initiativeMax">
        </mat-slider>
      </div>
      <div>
        {{ filters.value | json }}
      </div>
    </form>
  </mat-sidenav>
  <mat-sidenav-content class="app-sidenav-content">
    <mat-toolbar class="app-sidenav-toolbar" fxLayout="row" fxLayoutAlign="space-between center">
      <div fxFlex="20" fxLayout="row" fxLayoutAlign="start center">
        <button mat-icon-button (click)="left.toggle()">
          <mat-icon class="primary-color">menu</mat-icon>
        </button>
        <span class="primary-color">CARDS ({{ filteredCards().length }}/{{ cards.length }})</span>
      </div>
      <div fxFlex="40">
        <div class="search-container">
          <form [formGroup]="search">
            <mat-form-field appareance="outline">
              <mat-icon matPrefix class="primary-color">search</mat-icon>
              <input matInput placeholder="Quick search" formControlName="query"/>
              <button matSuffix mat-icon-button (click)="resetSearch()">
                <mat-icon class="primary-color">close</mat-icon>
              </button>
            </mat-form-field>
          </form>
        </div>
      </div>
      <div fxFlex="20" fxLayout="row" fxLayoutAlign="end center">
        <h3 class="primary-color">SELECTED ({{ deck.length }}/5)</h3>
        <button mat-icon-button (click)="right.toggle()">
          <mat-icon class="primary-color">menu</mat-icon>
        </button>
      </div>
    </mat-toolbar>
    <main class="app-main">
      <div class="flexbox-container" fxLayout="row wrap" fxLayoutAlign="start start">
        <div class="flexbox-item" fxFlex.xl="12.5" fxFlex.lg="20" fxFlex.md="33" fxFlex.sm="50" fxFlex.xs="50" *ngFor="let card of filteredCards()">
          <mat-card class="anachronism-card">
            <img mat-card-image [src]="'assets/cards/' + card.set + '_' + card.number + '.jpg'" [alt]="card.name">
          </mat-card>
        </div>
      </div>
    </main>
  </mat-sidenav-content>
  <mat-sidenav class="app-sidenav" #right mode="side" opened="true" position="end">
    <mat-toolbar>
      <button mat-icon-button>
        <mat-icon>clear</mat-icon>
      </button>
      <span class="flex-separator"></span>
      <h3 class="primary-color">DECK</h3>
      <button mat-icon-button (click)="right.toggle()">
        <mat-icon class="primary-color">menu</mat-icon>
      </button>
    </mat-toolbar>
    <div class="sidenav-deck" cdkDropList (cdkDropListDropped)="drop($event)">
      <mat-card class="anachronism-card" *ngFor="let card of deck; let i = index" [style.--index]="i" cdkDrag>
        <img mat-card-image [src]="'assets/cards/' + card.set + '_' + card.number + '.jpg'" [alt]="card.name">
      </mat-card>
    </div>
  </mat-sidenav>
</mat-sidenav-container>
